import { useContext, useEffect, useState } from 'react';

// Context
import { AppContext } from '../Context/ContextProvider';

// Helper
import { doFetch } from '../Helpers/Fetching';

// Style
import Style from './Icons.module.scss';

const Camera = () => {
    return (
        <svg className={Style.camera} viewBox="0 0 139.17 125.25">
            <path id="Path_3" data-name="Path 3" d="M91.85,69.59A22.27,22.27,0,1,1,69.58,47.32h0A22.27,22.27,0,0,1,91.85,69.59Z"/>
            <path id="Path_4" data-name="Path 4" d="M48.71,0,36,13.92h-22A14,14,0,0,0,0,27.83v83.51a14,14,0,0,0,13.92,13.91H125.25a14,14,0,0,0,13.92-13.91V27.83a14,14,0,0,0-13.92-13.91h-22L90.46,0ZM69.6,104.38a34.8,34.8,0,1,1,34.78-34.82v0A34.82,34.82,0,0,1,69.6,104.38Z"/>
        </svg>
    )
}

const Location = () => {
    return (
        <svg className={Style.location}  viewBox="0 0 92.59 138.8">
            <path d="M46.32,138.8a6.73,6.73,0,0,1-.7-1.1c-8.4-14.6-16.9-29.2-25.3-43.8-4.6-8-9.2-15.9-13.8-23.9A44.45,44.45,0,0,1,.12,49.7a45.06,45.06,0,0,1,10-32.2C18,7.7,28.32,2.1,40.72.3a44.13,44.13,0,0,1,10.9.1,46,46,0,0,1,39.7,35.4c2.6,11.4,1.3,22.4-4.6,32.7-4.6,8.1-9.3,16.2-13.9,24.3-8.5,14.8-17.1,29.6-25.6,44.4A8.94,8.94,0,0,1,46.32,138.8Zm0-109.7A17.12,17.12,0,0,0,29,46.4a17.35,17.35,0,0,0,34.7,0A17.2,17.2,0,0,0,46.32,29.1Z"/>
        </svg>
    )
} 

const Plan = () => {
    return (
        <svg className={Style.plan}  viewBox="0 0 137.63 123.48">
            <path d="M65,44.12v-27c0-3.12,0-6.24,0-9.36C65.08,2.39,67.48,0,72.79,0l57.77,0c4.45,0,7.07,2.59,7.07,7q0,52,0,104c0,1.78,0,3.55,0,5.32,0,4.4-2.68,7.09-7.08,7.08q-36.74,0-73.48,0-24.94,0-49.91,0c-4.71,0-7.16-2.43-7.16-7.14Q0,83.81,0,51.28c0-4.59,2.55-7.15,7.22-7.15H65ZM54.46,110.5c1.1.09,1.93.23,2.76.23,21.53,0,43.07,0,64.61,0,2.4,0,3-.89,2.93-3.12-.1-11-.05-22.11-.05-33.16,0-5.07,0-10.13,0-15.19,0-1.78-.62-2.43-2.37-2.32s-3.55.06-5.32,0A6.09,6.09,0,0,1,111,51.66c-.43-3.54,1.24-6.38,4.59-7.09a27.89,27.89,0,0,1,6.53-.4c1.94.06,2.66-.49,2.64-2.54q-.14-13.16,0-26.33c0-1.89-.61-2.44-2.48-2.43q-20.91.11-41.81,0c-2,0-2.64.54-2.62,2.56.11,7.59,0,15.19,0,22.78,0,5.66,0,5.66,5.5,5.93,4.17.2,7.25,3.14,7.07,6.73S87.43,57,83.21,57c-8.7,0-17.4.07-26.1,0-2.15,0-2.74.69-2.67,2.75a49,49,0,0,1-.28,8.82,6,6,0,0,1-6.79,5.09,6.22,6.22,0,0,1-5.76-6.26c-.06-2.53-.12-5.07,0-7.6.11-2-.47-2.83-2.66-2.79q-11.78.16-23.56,0c-2.08,0-2.52.72-2.51,2.63q.09,24.3,0,48.61c0,2.1.77,2.57,2.63,2.55,7.1-.06,14.19,0,21.29,0,5.8,0,4.62.17,4.81-4.7a18.83,18.83,0,0,1,.71-5.69c1-2.63,4.27-4,6.93-3.49,2.89.62,5,3.21,5.19,6.68C54.57,105.8,54.46,108.06,54.46,110.5Z"/>
        </svg>
    )
}

const Heart = (props) => {
    const [isFavorit, setIsFavorit] = useState(false);

    const { loginData, favList, setFavList } = useContext(AppContext);

    const houseId = props.data;

    const setAsFavorit = async () => {
        setIsFavorit(true)
        setFavList([...favList, houseId]);
        
        const url = `https://api.mediehuset.net/homelands/favorites`;
        const formData = new FormData();
            formData.append('home_id', houseId);
        const response = await doFetch(url, 'POST', formData, loginData.access_token);

        const sessionData = JSON.stringify([...favList, houseId]);
        sessionStorage.setItem('favList', sessionData);

        return response;
    }

    const removeAsFavorit = async () => {
        setIsFavorit(false)
        const filteredFavList = favList.filter(elements => elements !== houseId);
        setFavList(filteredFavList);

        const url = `https://api.mediehuset.net/homelands/favorites/${houseId}`;
        const response = await doFetch(url, 'DELETE', null, loginData.access_token);

        const sessionData = JSON.stringify(filteredFavList);
        sessionStorage.setItem('favList', sessionData);
        
        return response;
    }

    useEffect(() => {
        const isLiked = favList.some(element => element === props.data);
        if(isLiked) {
            setIsFavorit(true);
        } else {
            setIsFavorit(false);
        }
    }, [favList]);

    return (
        <svg onClick={!isFavorit ? setAsFavorit : removeAsFavorit} className={isFavorit ? `${Style.heart} ${Style.active}` : Style.heart} viewBox="0 0 139.66 120.58">
            <path d="M69.92,18.48l2.27-2.91C82.31,2.63,97.79-2.79,112.7,1.38c14.17,4,24.42,16.84,26.47,32.89,2,15.37-2,29-11.34,41.25a111.79,111.79,0,0,1-25.18,24.09c-10.09,7-20.44,13.72-30.76,20.42a4.19,4.19,0,0,1-3.72.19c-14.1-9.74-28.58-19-42-29.67C14.83,81.54,5.8,70.2,1.93,55.63A50.29,50.29,0,0,1,2.24,27C6.45,13.72,14.63,4.16,28.64,1.08c14.69-3.24,27.13,1.3,37.2,12.39C67.22,15,68.44,16.66,69.92,18.48Zm50.45,23.69c0,.66-.05,1.32-.13,2-.37,3.25.42,5.83,4.11,6.36,3.05.44,5.24-1.78,5.28-5.8A50,50,0,0,0,128.78,33c-2.86-12.36-13.91-22.58-25.64-24.26-3.91-.56-6.76,1.53-6.4,4.8s2.81,4,5.5,4.69A23.36,23.36,0,0,1,120.37,42.17Z"/>
        </svg>
    )
}

const Facebook = () => {
    return (
        <svg className={Style.facebook} viewBox="0 0 141 141">
            <path d="M0,0V141H73.2c0-5.26,0-10.51,0-15.76q0-17.42,0-34.82V88.66h-19V66.91H73l.24-.27c0-6.15-.06-12.3.09-18.45.2-8.15,2.93-15.31,9.21-20.76a21.71,21.71,0,0,1,11.66-5.26,83.07,83.07,0,0,1,11.9-.58c3.8.1,7.58.71,11.36,1.16a1.24,1.24,0,0,1,.83.86c0,5.8,0,11.6,0,17.56l-1.78.09c-3.78.16-7.58.15-11.34.53-4.21.41-7.25,3.4-8.17,7.67a19.4,19.4,0,0,0-.32,3.89c0,4.48,0,9,0,13.6h20.58c-.24,1.93-.42,3.68-.68,5.41-.54,3.6-1.14,7.19-1.71,10.78-.22,1.43-.43,2.85-.59,4.28-.12,1-.59,1.24-1.54,1.23-5.08,0-10.15,0-15.23,0-.19,0-.38,0-.83.06v50.86c0,.48,0,1,0,1.45H141V0Z"/>
        </svg>
    )
}

const Twitter = () => {
    return (
        <svg className={Style.twitter} viewBox="0 0 141 141">
            <path d="M0,0V141H141V0ZM112.14,49.14l-.06.33v4.82a2.2,2.2,0,0,1,0,.36c.14.16.18.3,0,.41-.14,1.41-.26,2.83-.41,4.24-.11,1-.22,2.07-.41,3.1a53.31,53.31,0,0,1-1.77,7.23c-.36,1-.65,2.11-1,3.14A63.92,63.92,0,0,1,101.82,86a60.19,60.19,0,0,1-9.31,11.14A57.45,57.45,0,0,1,81,105.53a55.92,55.92,0,0,1-11.23,4.73c-1.84.54-3.72,1-5.6,1.39-1.49.33-3,.59-4.53.79-1.28.18-2.58.25-3.88.34-1,.07-1.93.1-2.89.15h-2.6l-1.94-.06h-.16c-1.06-.07-2.12-.11-3.17-.22-1.3-.14-2.61-.31-3.9-.51-.88-.13-1.75-.35-2.62-.53-.38-.07-.77-.12-1.14-.22-1.46-.39-2.93-.77-4.37-1.22a58.92,58.92,0,0,1-12-5.28c-.79-.45-1.58-.93-2.37-1.39l-.22-.15,3.11.22h4c1.33-.13,2.67-.25,4-.39a36.07,36.07,0,0,0,6.25-1.35A41.37,41.37,0,0,0,46.31,97c1.11-.7,2.18-1.49,3.27-2.24l.43-.35A20.73,20.73,0,0,1,37.67,90.2,21.42,21.42,0,0,1,30,79.57a21.93,21.93,0,0,0,9.5-.37l-1.74-.5a21,21,0,0,1-7.71-4.21A21.4,21.4,0,0,1,24.89,68a21.86,21.86,0,0,1-1.65-4.29,19.89,19.89,0,0,1-.67-5.15,3,3,0,0,0,0-.52.1.1,0,0,0,.06-.05c.84.4,1.66.83,2.52,1.18a13.85,13.85,0,0,0,2.27.7c1.3.29,2.63.5,3.95.73a3.2,3.2,0,0,0,.62,0l0-.1-.28-.24a21.33,21.33,0,0,1-6.78-7.94,23.09,23.09,0,0,1-1.62-4.41,18.08,18.08,0,0,1-.57-4.2c0-.79,0-1.59,0-2.38V41c.15-1,.28-1.93.47-2.88a19.84,19.84,0,0,1,1.92-5.29c.14-.28.29-.54.47-.86.4.47.74.92,1.13,1.32,1.74,1.81,3.43,3.67,5.26,5.38a58,58,0,0,0,11.05,8,58.51,58.51,0,0,0,10.59,4.68c1.61.53,3.26,1,4.91,1.39s3.22.75,4.85,1c1.21.21,2.45.29,3.68.42.78.09,1.56.16,2.35.22.07,0,.19-.12.22-.21a.89.89,0,0,0,0-.32l0-.11,0-.21,0-.16c0-.22-.07-.43-.1-.64s0-.28-.07-.42l-.09-.89-.06-.64c0-.57,0-1.14,0-1.7V48.9c0-.27,0-.54,0-.81l0-.32v-.15l0-.1,0-.4,0-.26,0-.22,0-.07,0,0c0-.16,0-.32.08-.48a.14.14,0,0,1,0-.06l0,0c.19-.85.34-1.71.58-2.54a21.45,21.45,0,0,1,13.8-14.32,16,16,0,0,1,4-.87c1.3-.09,2.6-.13,3.9-.19h.1c1.37.2,2.78.3,4.12.63a20.44,20.44,0,0,1,8.56,4.44c.49.42,1,.86,1.42,1.33a.74.74,0,0,0,.78.23,40.3,40.3,0,0,0,8.69-2.82c1.27-.58,2.5-1.26,3.75-1.89l.53-.29c.18.8-1.65,4.38-3.41,6.65a23.1,23.1,0,0,1-5.54,5,41.76,41.76,0,0,0,11.89-3.26C122.25,39.77,115.93,46.39,112.14,49.14Z"/>
        </svg>
    )
}

const Search = () => {
    return (
        <svg className={Style.search} viewBox="0 0 108.45 140.33">
            <path d="M38.69,72.71a41.68,41.68,0,1,1,11,7.19l-6.17,9.44c-9.55,14.61-19,29.25-28.67,43.81a54.63,54.63,0,0,1-5.38,6.32,2.23,2.23,0,0,1-3.37.19,51,51,0,0,0-4.95-3.27A1.73,1.73,0,0,1,.18,134a53.81,53.81,0,0,1,3.62-7.76q16.91-26.14,34-52.15C38.11,73.65,38.4,73.17,38.69,72.71ZM66.78,77A35.24,35.24,0,1,0,31.53,41.67,35.37,35.37,0,0,0,66.78,77Z"/>
            <path d="M78.11,18.94c-1.26.48-2.46,1-3.7,1.37a1.9,1.9,0,0,1-1.28-.3,19.65,19.65,0,0,0-28.5,10.4,3.15,3.15,0,0,1-1.46,1.47A20.26,20.26,0,0,1,40.25,33c.29-6.12,5.66-13.82,12.48-17.13C62.64,11.05,73,14.15,78.11,18.94Z"/>
        </svg>
    )
}

const Pen = (props) => {
    const func = props.func;
    const data = props.data;



    return (
        <svg onClick={() => func(data)} className={Style.pen} viewBox="0 0 138.55 137.96">
            <path d="M0,138l3.3-13.12q4.2-16.68,8.43-33.35A5.5,5.5,0,0,1,13,89.07Q48.58,53.46,84.17,17.9a4.11,4.11,0,0,1,.45-.35l36.17,36.21c-2.73,2.61-5.68,5.33-8.52,8.16Q81.13,93,50,124.06a10.93,10.93,0,0,1-4.79,2.59c-14.51,3.78-29.06,7.42-43.6,11.1A13.54,13.54,0,0,1,0,138ZM46.73,113.1c19.92-19.91,40-40,59.94-59.94-2.25-2.28-4.76-4.8-7-7.1L41.44,104.23ZM34,96.69l58.13-58-7.2-7.47q-30,30.07-60,60.11Zm4.31,21.67c-3-8.14-12.28-17.25-18.63-18.36-1.44,5.86-2.89,11.71-4.3,17.58a3.06,3.06,0,0,0-.05,2c1.62,2.65,4.1,3.52,7.2,2.72.31-.08.62-.13.92-.2Z"/>
            <path d="M124,50.17,87.8,14C92.37,9.5,97,4.8,101.84.43c.83-.75,3-.35,4.41-.07,17,3.26,29.28,16,32.18,33.21a4.36,4.36,0,0,1-1.58,4.64C132.46,42.17,128.19,46.26,124,50.17Zm0-13.63a40.16,40.16,0,0,0,3.29-3.36,2.91,2.91,0,0,0,.54-2.26c-3.2-10.45-10-17.37-20.51-20.59a2.75,2.75,0,0,0-2.12.31c-1.39,1-2.62,2.25-3.8,3.3Z"/>
        </svg>
    )
}

const Trash = (props) => {
    const func = props.func;
    const data = props.data;

    return (
        <svg onClick={() => func(data)} className={Style.trash} viewBox="0 0 102.49 140.21">
            <path d="M5.18,32.81h92.4c0,.67.14,1.49.12,2.3q-1.07,36.24-2.15,72.48-.35,11.39-.7,22.79c-.19,6.47-3.57,9.81-10,9.82q-33.34,0-66.67,0a13.58,13.58,0,0,1-3.18-.33c-4.28-1-6.73-3.86-6.88-8.25q-1-30.39-1.9-60.78-.52-17.53-1-35.06C5.15,34.82,5.18,33.86,5.18,32.81Zm13.55,53q0,18.42,0,36.82c0,2.31,1,3.92,3.32,3.87,2.19-.06,3.12-1.67,3.12-3.82,0-24.64,0-49.29-.07-73.93a5,5,0,0,0-1.47-3.23c-.59-.55-2.41-.77-2.84-.32a6.35,6.35,0,0,0-2,3.8C18.67,61.28,18.73,73.55,18.73,85.82Zm59.08-.25c0,12.17,0,24.34,0,36.51,0,2.3.42,4.19,3,4.48,2.07.23,3.34-1.58,3.34-4.51q0-36.37,0-72.74c0-3-1.21-4.65-3.36-4.43-2.67.27-3,2.21-3,4.46C77.83,61.41,77.8,73.49,77.81,85.57Zm-13.47.16h.06q0-13.59,0-27.17c0-3.51,0-7-.07-10.52,0-1.92-1.23-3.41-3.08-3.06-1.17.22-2.16,1.75-3.06,2.83-.3.35-.09,1.13-.09,1.72q0,35.94,0,71.89c0,1-.15,2.15.34,2.82.71,1,2,2.21,2.95,2.15S63.47,125,64.21,124c.38-.51.13-1.51.13-2.29ZM38.6,85.65h0q0,18.27,0,36.53c0,.58-.2,1.35.09,1.72.78,1,1.81,2.55,2.67,2.51,1.1,0,2.3-1.32,3.11-2.35.45-.55.19-1.69.19-2.56q.08-28.92.11-57.84c0-5.07.06-10.14-.15-15.19a4.7,4.7,0,0,0-1.84-3.22,3.19,3.19,0,0,0-3.07.48,5.28,5.28,0,0,0-1.05,3.4C38.58,61.31,38.6,73.48,38.6,85.65Z"/>
            <path d="M29.73,14.38c-.07-1.55-.24-2.9-.18-4.23.17-3.8,2.11-5.64,5.92-5.68,2.82,0,5.65,0,8.48,0A2.71,2.71,0,0,0,46.6,3c1-1.47,3.1-3,4.75-3S55,1.47,56.21,2.85c.92,1,1.52,1.7,2.95,1.63,2.43-.11,4.87,0,7.31,0,5.18,0,7,1.91,6.8,7.12,0,.78-.09,1.56-.16,2.64.86,0,1.68.15,2.51.15,7,0,14,0,21.06,0,4.09,0,5.87,1.85,5.81,5.88,0,.78,0,1.56,0,2.34,0,4.74-1.72,6.43-6.52,6.43q-44.31,0-88.62,0c-2.65,0-5.44,0-6.41-2.87C-.17,23-.63,19.37,1.45,16.4c.81-1.16,3-1.88,4.52-1.93,6.92-.2,13.84-.09,20.77-.09Z"/>
        </svg>
    )
}

export { Camera, Location, Plan, Heart, Facebook, Twitter, Search, Pen, Trash };